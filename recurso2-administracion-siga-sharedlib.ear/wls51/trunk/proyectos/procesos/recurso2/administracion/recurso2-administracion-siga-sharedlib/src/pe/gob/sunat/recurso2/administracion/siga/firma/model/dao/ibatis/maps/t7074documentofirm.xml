<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t7074documentofirm" >
  <resultMap id="BaseResultMap" class="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    <result column="COD_DOCAUT" property="codDocaut" jdbcType="DECIMAL" />
    <result column="COD_FIRMA" property="codFirma" jdbcType="CHAR" />
    <result column="COD_TIPDOC" property="codTipdoc" jdbcType="CHAR" />
    <result column="NUM_DOCUMENTO" property="numDocumento" jdbcType="VARCHAR" />
    <result column="NUM_SECUENCIA" property="numSecuencia" jdbcType="DECIMAL" />
    <result column="COD_DOCSEQ" property="codDocseq" jdbcType="DECIMAL" />
    <result column="NUM_VERSION" property="numVersion" jdbcType="DECIMAL" />
    <result column="COD_UUOO" property="codUuoo" jdbcType="CHAR" />
    <result column="COD_UNNORMA" property="codUnnorma" jdbcType="CHAR" />
    <result column="COD_TOKEN" property="codToken" jdbcType="CHAR" />
    <result column="NOM_MODULO" property="nomModulo" jdbcType="VARCHAR" />
    <result column="NOM_PROCESO" property="nomProceso" jdbcType="VARCHAR" />
    <result column="FEC_FIRMA" property="fecFirma" jdbcType="TIMESTAMP" />
    <result column="NOM_ARCHIVO" property="nomArchivo" jdbcType="VARCHAR" />
    <result column="COD_IDARCHIVO" property="codIdarchivo" jdbcType="DECIMAL" />
    <result column="COD_USUAUTOR" property="codUsuautor" jdbcType="CHAR" />
    <result column="COD_CARGTCA" property="codCargtca" jdbcType="CHAR" />
    <result column="IND_ESTDOC" property="indEstdoc" jdbcType="CHAR" />
    <result column="FEC_REGIS" property="fecRegis" jdbcType="TIMESTAMP" />
    <result column="COD_USUREGIS" property="codUsuregis" jdbcType="VARCHAR" />
    <result column="DIR_IPUSUREGIS" property="dirIpusuregis" jdbcType="VARCHAR" />
    <result column="FEC_MODIF" property="fecModif" jdbcType="TIMESTAMP" />
    <result column="COD_USUMODIF" property="codUsumodif" jdbcType="VARCHAR" />
    <result column="DIR_IPUSUMODIF" property="dirIpusumodif" jdbcType="VARCHAR" />
    <result column="ARC_FIRMADO" property="arcFirmado" jdbcType="BLOB" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    select 'false' as QUERYID, COD_DOCAUT, COD_FIRMA, COD_TIPDOC, NUM_DOCUMENTO, NUM_SECUENCIA,
      COD_DOCSEQ, NUM_VERSION, COD_UUOO, COD_UNNORMA, COD_TOKEN, NOM_MODULO, NOM_PROCESO, FEC_FIRMA,
      NOM_ARCHIVO, COD_IDARCHIVO, COD_USUAUTOR, COD_CARGTCA, IND_ESTDOC, FEC_REGIS, COD_USUREGIS, DIR_IPUSUREGIS,
      FEC_MODIF, COD_USUMODIF, DIR_IPUSUMODIF, ARC_FIRMADO
    from T7074DOCUMENTOFIRM
    where COD_DOCAUT = #codDocaut:DECIMAL#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    delete from T7074DOCUMENTOFIRM
    where COD_DOCAUT = #codDocaut:DECIMAL#
  </delete>
  <insert id="insert" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    insert into T7074DOCUMENTOFIRM (COD_DOCAUT, COD_FIRMA, COD_TIPDOC, NUM_DOCUMENTO,
      NUM_SECUENCIA, COD_DOCSEQ, NUM_VERSION, COD_UUOO, COD_UNNORMA, COD_TOKEN, NOM_MODULO, NOM_PROCESO,
      FEC_FIRMA, NOM_ARCHIVO, COD_IDARCHIVO, COD_USUAUTOR, COD_CARGTCA, IND_ESTDOC, FEC_REGIS, COD_USUREGIS,
      DIR_IPUSUREGIS, FEC_MODIF, COD_USUMODIF, DIR_IPUSUMODIF)
    values (#codDocaut:DECIMAL#, #codFirma:CHAR#, #codTipdoc:CHAR#, #numDocumento:VARCHAR#,
      #numSecuencia:DECIMAL#, #codDocseq:DECIMAL#, #numVersion:DECIMAL#, #codUuoo:CHAR#,
      #codUnnorma:CHAR#, #codToken:CHAR#, #nomModulo:VARCHAR#, #nomProceso:VARCHAR#, #fecFirma:TIMESTAMP#,
      #nomArchivo:VARCHAR#, #codIdarchivo:DECIMAL#, #codUsuautor:CHAR#, #codCargtca:CHAR#, #indEstdoc:CHAR#,
      #fecRegis:TIMESTAMP#, #codUsuregis:VARCHAR#, #dirIpusuregis:VARCHAR#, #fecModif:TIMESTAMP#,
      #codUsumodif:VARCHAR#, #dirIpusumodif:VARCHAR#)
  </insert>
  <insert id="insertSelective" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    insert into T7074DOCUMENTOFIRM
    <dynamic prepend="(" >
      <isNotNull prepend="," property="codDocaut" >
        COD_DOCAUT
      </isNotNull>
      <isNotNull prepend="," property="codFirma" >
        COD_FIRMA
      </isNotNull>
      <isNotNull prepend="," property="codTipdoc" >
        COD_TIPDOC
      </isNotNull>
      <isNotNull prepend="," property="numDocumento" >
        NUM_DOCUMENTO
      </isNotNull>
      <isNotNull prepend="," property="numSecuencia" >
        NUM_SECUENCIA
      </isNotNull>
      <isNotNull prepend="," property="codDocseq" >
        COD_DOCSEQ
      </isNotNull>
      <isNotNull prepend="," property="numVersion" >
        NUM_VERSION
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        COD_UUOO
      </isNotNull>
      <isNotNull prepend="," property="codUnnorma" >
        COD_UNNORMA
      </isNotNull>
      <isNotNull prepend="," property="codToken" >
        COD_TOKEN
      </isNotNull>
      <isNotNull prepend="," property="nomModulo" >
        NOM_MODULO
      </isNotNull>
      <isNotNull prepend="," property="nomProceso" >
        NOM_PROCESO
      </isNotNull>
      <isNotNull prepend="," property="fecFirma" >
        FEC_FIRMA
      </isNotNull>
      <isNotNull prepend="," property="nomArchivo" >
        NOM_ARCHIVO
      </isNotNull>
      <isNotNull prepend="," property="codIdarchivo" >
        COD_IDARCHIVO
      </isNotNull>
      <isNotNull prepend="," property="codUsuautor" >
        COD_USUAUTOR
      </isNotNull>
      <isNotNull prepend="," property="codCargtca" >
        COD_CARGTCA
      </isNotNull>
      <isNotNull prepend="," property="indEstdoc" >
        IND_ESTDOC
      </isNotNull>

      <isNotNull prepend="," property="codNumregalterno" >
        COD_NUMREGALTERNO
      </isNotNull>
      <isNotNull prepend="," property="codCodinivenvl" >
        COD_CODINIVENVL
      </isNotNull>

      <isNotNull prepend="," property="fecRegis" >
        FEC_REGIS
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        COD_USUREGIS
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        DIR_IPUSUREGIS
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        FEC_MODIF
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        COD_USUMODIF
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        DIR_IPUSUMODIF
      </isNotNull>
      <isNotNull prepend="," property="arcFirmado" >
        ARC_FIRMADO
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="codDocaut" >
        #codDocaut:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codFirma" >
        #codFirma:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codTipdoc" >
        #codTipdoc:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="numDocumento" >
        #numDocumento:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="numSecuencia" >
        #numSecuencia:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codDocseq" >
        #codDocseq:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numVersion" >
        #numVersion:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        #codUuoo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codUnnorma" >
        #codUnnorma:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codToken" >
        #codToken:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="nomModulo" >
        #nomModulo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="nomProceso" >
        #nomProceso:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecFirma" >
        #fecFirma:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="nomArchivo" >
        #nomArchivo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codIdarchivo" >
        #codIdarchivo:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codUsuautor" >
        #codUsuautor:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codCargtca" >
        #codCargtca:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="indEstdoc" >
        #indEstdoc:CHAR#
      </isNotNull>

      <isNotNull prepend="," property="codNumregalterno" >
        #codNumregalterno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codCodinivenvl" >
        #codCodinivenvl:VARCHAR#
      </isNotNull>

      <isNotNull prepend="," property="fecRegis" >
        #fecRegis:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        #codUsuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        #dirIpusuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        #fecModif:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        #codUsumodif:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        #dirIpusumodif:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="arcFirmado" >
        #arcFirmado:BLOB#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    update T7074DOCUMENTOFIRM
    <dynamic prepend="set" >
      <isNotNull prepend="," property="codFirma" >
        COD_FIRMA = #codFirma:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codTipdoc" >
        COD_TIPDOC = #codTipdoc:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="numDocumento" >
        NUM_DOCUMENTO = #numDocumento:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="numSecuencia" >
        NUM_SECUENCIA = #numSecuencia:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codDocseq" >
        COD_DOCSEQ = #codDocseq:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numVersion" >
        NUM_VERSION = #numVersion:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        COD_UUOO = #codUuoo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codUnnorma" >
        COD_UNNORMA = #codUnnorma:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codToken" >
        COD_TOKEN = #codToken:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="nomModulo" >
        NOM_MODULO = #nomModulo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="nomProceso" >
        NOM_PROCESO = #nomProceso:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecFirma" >
        FEC_FIRMA = #fecFirma:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="nomArchivo" >
        NOM_ARCHIVO = #nomArchivo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codIdarchivo" >
        COD_IDARCHIVO = #codIdarchivo:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codUsuautor" >
        COD_USUAUTOR = #codUsuautor:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codCargtca" >
        COD_CARGTCA = #codCargtca:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="indEstdoc" >
        IND_ESTDOC = #indEstdoc:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecRegis" >
        FEC_REGIS = #fecRegis:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        COD_USUREGIS = #codUsuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        DIR_IPUSUREGIS = #dirIpusuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        FEC_MODIF = #fecModif:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        COD_USUMODIF = #codUsumodif:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        DIR_IPUSUMODIF = #dirIpusumodif:VARCHAR#
      </isNotNull>
    </dynamic>
    where COD_DOCAUT = #codDocaut:DECIMAL#
  </update>
  <update id="updateByPrimaryKey" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    update T7074DOCUMENTOFIRM
    set COD_FIRMA = #codFirma:CHAR#,
      COD_TIPDOC = #codTipdoc:CHAR#,
      NUM_DOCUMENTO = #numDocumento:VARCHAR#,
      NUM_SECUENCIA = #numSecuencia:DECIMAL#,
      COD_DOCSEQ = #codDocseq:DECIMAL#,
      NUM_VERSION = #numVersion:DECIMAL#,
      COD_UUOO = #codUuoo:CHAR#,
      COD_UNNORMA = #codUnnorma:CHAR#,
      COD_TOKEN = #codToken:CHAR#,
      NOM_MODULO = #nomModulo:VARCHAR#,
      NOM_PROCESO = #nomProceso:VARCHAR#,
      FEC_FIRMA = #fecFirma:TIMESTAMP#,
      NOM_ARCHIVO = #nomArchivo:VARCHAR#,
      COD_IDARCHIVO = #codIdarchivo:DECIMAL#,
      COD_USUAUTOR = #codUsuautor:CHAR#,
      COD_CARGTCA = #codCargtca:CHAR#,
      IND_ESTDOC = #indEstdoc:CHAR#,
      FEC_REGIS = #fecRegis:TIMESTAMP#,
      COD_USUREGIS = #codUsuregis:VARCHAR#,
      DIR_IPUSUREGIS = #dirIpusuregis:VARCHAR#,
      FEC_MODIF = #fecModif:TIMESTAMP#,
      COD_USUMODIF = #codUsumodif:VARCHAR#,
      DIR_IPUSUMODIF = #dirIpusumodif:VARCHAR#
    where COD_DOCAUT = #codDocaut:DECIMAL#
  </update>

  <update id="updateEstadoDocumento" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    update T7074DOCUMENTOFIRM
    set 
      IND_ESTDOC = #indEstdoc:CHAR#,
      FEC_MODIF = #fecModif:TIMESTAMP#,
      COD_USUMODIF = #codUsumodif:VARCHAR#,
      DIR_IPUSUMODIF = #dirIpusumodif:VARCHAR#
    where COD_TIPDOC = #codTipdoc:CHAR#
      and NUM_DOCUMENTO = #numDocumento:VARCHAR#
      <!-- AQUI JMCR -->
      and IND_ESTDOC != #indEstdoc:CHAR#
      <!-- AQUI JMCR -->
  </update>

  <select id="listByParameter" resultMap="BaseResultMap" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    select COD_DOCAUT, COD_FIRMA, COD_TIPDOC, NUM_DOCUMENTO, NUM_SECUENCIA,
      COD_DOCSEQ, NUM_VERSION, COD_UUOO, COD_UNNORMA, COD_TOKEN, NOM_MODULO, NOM_PROCESO, FEC_FIRMA,
      NOM_ARCHIVO, COD_IDARCHIVO, COD_USUAUTOR, COD_CARGTCA, IND_ESTDOC, FEC_REGIS, COD_USUREGIS, DIR_IPUSUREGIS,
      FEC_MODIF, COD_USUMODIF, DIR_IPUSUMODIF, ARC_FIRMADO
    from T7074DOCUMENTOFIRM
    <dynamic prepend="where">
	  <isNotNull prepend=" and " property="codDocaut">COD_DOCAUT = #codDocaut:DECIMAL#</isNotNull> 
	  <isNotNull prepend=" and " property="codFirma">COD_FIRMA = #codFirma:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codTipdoc">COD_TIPDOC = #codTipdoc:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="numDocumento">NUM_DOCUMENTO = #numDocumento:VARCHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUuoo">COD_UUOO = #codUuoo:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUnnorma">COD_UNNORMA = #codUnnorma:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomModulo">NOM_MODULO = #nomModulo:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomProceso">NOM_PROCESO = #nomProceso:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="codUsuautor">COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="indEstdoc">IND_ESTDOC = #indEstdoc:CHAR#</isNotNull> 
	</dynamic>
  </select>

  <resultMap id="BaseResultMapJoinMpDep" class="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    <result column="COD_DOCAUT" property="codDocaut" jdbcType="DECIMAL" />
    <result column="COD_FIRMA" property="codFirma" jdbcType="CHAR" />
    <result column="COD_TIPDOC" property="codTipdoc" jdbcType="CHAR" />
    <result column="NUM_DOCUMENTO" property="numDocumento" jdbcType="VARCHAR" />
    <result column="NUM_SECUENCIA" property="numSecuencia" jdbcType="DECIMAL" />
    <result column="COD_DOCSEQ" property="codDocseq" jdbcType="DECIMAL" />
    <result column="NUM_VERSION" property="numVersion" jdbcType="DECIMAL" />
    <result column="COD_UUOO" property="codUuoo" jdbcType="CHAR" />
    <result column="COD_UNNORMA" property="codUnnorma" jdbcType="CHAR" />
    <result column="COD_TOKEN" property="codToken" jdbcType="CHAR" />
    <result column="NOM_MODULO" property="nomModulo" jdbcType="VARCHAR" />
    <result column="NOM_PROCESO" property="nomProceso" jdbcType="VARCHAR" />
    <result column="FEC_FIRMA" property="fecFirma" jdbcType="TIMESTAMP" />
    <result column="NOM_ARCHIVO" property="nomArchivo" jdbcType="VARCHAR" />
    <result column="COD_IDARCHIVO" property="codIdarchivo" jdbcType="DECIMAL" />
    <result column="COD_USUAUTOR" property="codUsuautor" jdbcType="CHAR" />
    <result column="COD_CARGTCA" property="codCargtca" jdbcType="CHAR" />
    <result column="IND_ESTDOC" property="indEstdoc" jdbcType="CHAR" />

    <result column="NUMERO_REGISTRO_ALTERNO" property="numeroRegistroAlterno" jdbcType="CHAR" />
    <result column="NOMB_CORT_PER" property="nombCortPer" jdbcType="CHAR" />
    <result column="LIBR_ELEC_PER" property="librElecPer" jdbcType="CHAR" />
    <result column="UNIDAD_ORGANIZACIONAL" property="unidadOrganizacional" jdbcType="CHAR" />
    <result column="DESC_DEPE_TDE" property="descDepeTde" jdbcType="CHAR" />
    <result column="ABREVIATURA" property="abreviatura" jdbcType="CHAR" />
    <result column="DESC_CARG_TCA" property="descCargTca" jdbcType="CHAR" />
    <result column="DESCRIPCION_CORTA" property="descripcionCortaCargo" jdbcType="CHAR" />
        
  </resultMap>

  <select id="listByParameterConDatosFirmantes" resultMap="BaseResultMapJoinMpDep" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    select DF.COD_DOCAUT, DF.COD_FIRMA, DF.COD_TIPDOC, DF.NUM_DOCUMENTO, DF.NUM_SECUENCIA,
      DF.COD_DOCSEQ, DF.NUM_VERSION, DF.COD_UUOO, DF.COD_UNNORMA, DF.COD_TOKEN, DF.NOM_MODULO, DF.NOM_PROCESO, DF.FEC_FIRMA,
      DF.NOM_ARCHIVO, DF.COD_IDARCHIVO, DF.COD_USUAUTOR, DF.COD_CARGTCA, DF.IND_ESTDOC,
      MP.NUMERO_REGISTRO_ALTERNO, MP.NOMB_CORT_PER, MP.LIBR_ELEC_PER, 
      D.UNIDAD_ORGANIZACIONAL, D.DESC_DEPE_TDE, D.ABREVIATURA, 
      C.DESC_CARG_TCA, C.DESCRIPCION_CORTA
    from T7074DOCUMENTOFIRM DF, TDEPENDENCIAS D, MAESTRO_PERSONAL MP, TCARGOS C
	where DF.COD_UUOO = D.CODI_DEPE_TDE (+)
	and DF.COD_USUAUTOR = MP.CODI_EMPL_PER
	and DF.COD_CARGTCA = C.CODI_CARG_TCA (+)
    <dynamic>
	  <isNotNull prepend=" and " property="codDocaut">DF.COD_DOCAUT = #codDocaut:DECIMAL#</isNotNull> 
	  <isNotNull prepend=" and " property="codFirma">DF.COD_FIRMA = #codFirma:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codTipdoc">DF.COD_TIPDOC = #codTipdoc:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="numDocumento">DF.NUM_DOCUMENTO = #numDocumento:VARCHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUuoo">DF.COD_UUOO = #codUuoo:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUnnorma">DF.COD_UNNORMA = #codUnnorma:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomModulo">DF.NOM_MODULO = #nomModulo:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomProceso">DF.NOM_PROCESO = #nomProceso:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="codUsuautor">DF.COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="indEstdoc">DF.IND_ESTDOC = #indEstdoc:CHAR#</isNotNull> 
	</dynamic>
	
	order by DF.NUM_SECUENCIA desc, DF.NUM_VERSION desc
  </select>

  <!-- select id="obtenerSecuencial" resultClass="java.lang.Long" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm">
    select NVL(MAX(DF.COD_DOCAUT),0) + 1
    from T7074DOCUMENTOFIRM DF
  </select -->

	<parameterMap id="obtenerSecuencialParam" class="java.util.HashMap">
		<parameter property="nomtabla" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="IN" />
		<parameter property="nomcampo" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="IN" />
		<parameter property="vSecuencia" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>
	
	<procedure id="obtenerSecuencial" parameterMap="obtenerSecuencialParam">
		{ CALL SIGA01.PAFIRMAELECTRONICA.SPSECUENCIASIGA (?,?,? ) }
	</procedure>


 <select id="obtenerDocumentosFirma" resultMap="BaseResultMapJoinMpDep" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    select DF.COD_DOCAUT, DF.COD_FIRMA, DF.COD_TIPDOC, DF.NUM_DOCUMENTO, DF.NUM_SECUENCIA,
      DF.COD_DOCSEQ, DF.NUM_VERSION, DF.COD_UUOO, DF.COD_UNNORMA, DF.COD_TOKEN, DF.NOM_MODULO, DF.NOM_PROCESO, DF.FEC_FIRMA,
      DF.NOM_ARCHIVO, DF.COD_IDARCHIVO, DF.COD_USUAUTOR, DF.COD_CARGTCA, DF.IND_ESTDOC,
      MP.NUMERO_REGISTRO_ALTERNO, MP.NOMB_CORT_PER, MP.LIBR_ELEC_PER, 
      D.UNIDAD_ORGANIZACIONAL, D.DESC_DEPE_TDE, D.ABREVIATURA, 
      C.DESC_CARG_TCA, C.DESCRIPCION_CORTA
    from T7074DOCUMENTOFIRM DF, TDEPENDENCIAS D, MAESTRO_PERSONAL MP, TCARGOS C
	where DF.COD_UUOO = D.CODI_DEPE_TDE (+)
	and DF.COD_USUAUTOR = MP.CODI_EMPL_PER
	and DF.COD_CARGTCA = C.CODI_CARG_TCA (+)
    <dynamic>
	  <isNotNull prepend=" and " property="codDocaut">DF.COD_DOCAUT = #codDocaut:DECIMAL#</isNotNull> 
	  <isNotNull prepend=" and " property="codFirma">DF.COD_FIRMA = #codFirma:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codTipdoc">DF.COD_TIPDOC = #codTipdoc:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="numDocumento">DF.NUM_DOCUMENTO = #numDocumento:VARCHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUuoo">DF.COD_UUOO = #codUuoo:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUnnorma">DF.COD_UNNORMA = #codUnnorma:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomModulo">DF.NOM_MODULO = #nomModulo:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="nomProceso">DF.NOM_PROCESO = #nomProceso:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="codUsuautor">DF.COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="indEstdoc">DF.IND_ESTDOC = #indEstdoc:CHAR#</isNotNull> 
	</dynamic>
	
	order by DF.NUM_SECUENCIA desc, DF.NUM_VERSION desc
  </select>


<!-- DPORRASC -->
	<resultMap id="BaseResultMapJoinMpTipDoc" class="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7074DocumentoFirm" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    <result column="COD_TIPDOC" property="codTipdoc" jdbcType="CHAR" />
    <result column="DESC_DOCU_TPD" property="desTipoDocumento" jdbcType="VARCHAR" />
    <result column="NUM_DOCUMENTO" property="numDocumento" jdbcType="VARCHAR" />
    <result column="NUM_SECUENCIA" property="numSecuencia" jdbcType="DECIMAL" />
    <result column="COD_DOCSEQ" property="codDocseq" jdbcType="DECIMAL" />
    <result column="NUM_VERSION" property="numVersion" jdbcType="DECIMAL" />
    <result column="COD_UUOO" property="codUuoo" jdbcType="CHAR" />
    <result column="COD_UNNORMA" property="codUnnorma" jdbcType="CHAR" />
    <result column="COD_TOKEN" property="codToken" jdbcType="CHAR" />
    <result column="NOM_MODULO" property="nomModulo" jdbcType="VARCHAR" />
    <result column="NOM_PROCESO" property="nomProceso" jdbcType="VARCHAR" />
    <result column="COD_FIRMA" property="codFirma" jdbcType="CHAR" />
    <result column="FEC_FIRMA" property="fecFirma" jdbcType="TIMESTAMP" />
    <result column="NOM_ARCHIVO" property="nomArchivo" jdbcType="VARCHAR" />
    <result column="COD_IDARCHIVO" property="codIdarchivo" jdbcType="DECIMAL" />
    <result column="COD_USUAUTOR" property="codUsuautor" jdbcType="CHAR" />
    <result column="COD_CARGTCA" property="codCargtca" jdbcType="CHAR" />
    <result column="IND_ESTDOC" property="indEstdoc" jdbcType="CHAR" />

    <result column="NUMERO_REGISTRO_ALTERNO" property="numeroRegistroAlterno" jdbcType="CHAR" />
    <result column="NOMB_CORT_PER" property="nombCortPer" jdbcType="CHAR" />
    <result column="LIBR_ELEC_PER" property="librElecPer" jdbcType="CHAR" />
    <result column="UNIDAD_ORGANIZACIONAL" property="unidadOrganizacional" jdbcType="CHAR" />
    <result column="DESC_DEPE_TDE" property="descDepeTde" jdbcType="CHAR" />
    <result column="ABREVIATURA" property="abreviatura" jdbcType="CHAR" />
    <result column="DESC_CARG_TCA" property="descCargTca" jdbcType="CHAR" />
    <result column="DESCRIPCION_CORTA" property="descripcionCortaCargo" jdbcType="CHAR" />
    
    <result column="DESC_UUOO_NORMA" property="descUuooNorma" jdbcType="VARCHAR" />
    <result column="UUOO_NORMA" property="uuooNorma" jdbcType="VARCHAR" />
    
  </resultMap>

		<select id="listarDocumentosFirma" resultMap="BaseResultMapJoinMpTipDoc" parameterClass="java.util.HashMap" >
		    SELECT TDOC.DESC_DOCU_TPD,
		    DF.COD_DOCAUT, DF.COD_FIRMA, 
            DF.COD_TIPDOC, DF.NUM_DOCUMENTO, 
            DF.NUM_SECUENCIA,
              DF.COD_DOCSEQ, 
              DF.NUM_VERSION, 
              DF.COD_UUOO, 
              DF.COD_UNNORMA,
              TD.UNIDAD_ORGANIZACIONAL UUOO_NORMA, 
              TD.DESC_DEPE_TDE DESC_UUOO_NORMA,  
              DF.COD_TOKEN, 
              DF.NOM_MODULO, 
              DF.NOM_PROCESO, 
              DF.FEC_FIRMA,
              DF.NOM_ARCHIVO, 
              DF.COD_IDARCHIVO, 
              DF.COD_USUAUTOR, 
              DF.COD_CARGTCA, 
              DF.IND_ESTDOC,
              MP.NUMERO_REGISTRO_ALTERNO, 
              TRIM(MP.NOMB_CORT_PER) AS NOMB_CORT_PER, 
              MP.LIBR_ELEC_PER, 
              D.UNIDAD_ORGANIZACIONAL, 
              D.DESC_DEPE_TDE, 
              D.ABREVIATURA, 
              C.DESC_CARG_TCA, 
              C.DESCRIPCION_CORTA 
            FROM 
            (SELECT P.COD_CARGTCA,
                        P.COD_DOCAUT,
                        P.COD_DOCSEQ,            
                        P.COD_FIRMA,            
                        P.COD_IDARCHIVO,            
                        P.COD_TIPDOC,
                        P.COD_TOKEN,
                        P.COD_UNNORMA,
                        P.COD_USUAUTOR,
                        P.COD_UUOO,
                        P.FEC_FIRMA,
                        P.IND_ESTDOC,
                        P.NOM_ARCHIVO,
                        P.NOM_MODULO,
                        P.NOM_PROCESO,
                        P.NUM_DOCUMENTO,
                        P.NUM_SECUENCIA,
                        P.NUM_VERSION 
                        FROM t7074documentofirm P
                        WHERE P.ind_estdoc = '1'
                        <isNotNull prepend=" and " property="codUsuautor">P.COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull> 
                        UNION
                        SELECT F.COD_CARGTCA,
                        F.COD_DOCAUT,
                        F.COD_DOCSEQ,            
                        F.COD_FIRMA,            
                        F.COD_IDARCHIVO,            
                        F.COD_TIPDOC,
                        F.COD_TOKEN,
                        F.COD_UNNORMA,
                        F.COD_USUAUTOR,
                        F.COD_UUOO,
                        F.FEC_FIRMA,
                        F.IND_ESTDOC,
                        F.NOM_ARCHIVO,
                        F.NOM_MODULO,
                        F.NOM_PROCESO,
                        F.NUM_DOCUMENTO,
                        F.NUM_SECUENCIA,
                        F.NUM_VERSION 
                        FROM t7074documentofirm P, t7074documentofirm F
                        WHERE P.ind_estdoc = '*'
                        AND f.num_documento = P.num_documento
                        AND f.cod_tipdoc = P.cod_tipdoc
                        AND f.ind_estdoc = '1'
						<isNotNull prepend=" and " property="codUsuautor">P.COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull>  
            ) DF, TDEPENDENCIAS D, MAESTRO_PERSONAL MP, TDEPENDENCIAS TD, TCARGOS C , TIPO_DOCUMENTOS TDOC
            WHERE DF.COD_UUOO = D.CODI_DEPE_TDE (+)
            AND DF.COD_USUAUTOR = MP.CODI_EMPL_PER
            AND DF.COD_UNNORMA=TD.CODI_DEPE_TDE
            AND DF.COD_CARGTCA = C.CODI_CARG_TCA (+)
            AND DF.COD_TIPDOC=TDOC.TIPO_DOCU_TPD (+)
            AND TO_CHAR(DF.FEC_FIRMA,'YYYYMMDD') BETWEEN TO_CHAR(#fecDesde#,'YYYYMMDD') AND TO_CHAR(#fecHasta#,'YYYYMMDD')
	    <dynamic>
	      <!-- <isNotNull prepend=" and " property="fecFirma">TO_CHAR(DF.FEC_FIRMA,'YYYYMMDD') BETWEEN TO_CHAR(#fecDesde,'YYYYMMDD') AND TO_CHAR(#fecHasta,'YYYYMMDD')</isNotNull> --> 
		  <!-- <isNotNull prepend=" and " property="codDocaut">DF.COD_DOCAUT = #codDocaut:DECIMAL#</isNotNull>  -->
		  <!-- <isNotNull prepend=" and " property="codFirma">DF.COD_FIRMA = #codFirma:CHAR#</isNotNull>  -->
		  <isNotNull prepend=" and " property="codTipdoc">DF.COD_TIPDOC = #codTipdoc:CHAR#</isNotNull> 
	  	  <isNotNull prepend=" and " property="numDocumento">DF.NUM_DOCUMENTO like #numDocumento:VARCHAR#</isNotNull> 
		  <isNotNull prepend=" and " property="codUuoo">DF.COD_UUOO = #codUuoo:CHAR#</isNotNull>  
		  <!-- <isNotNull prepend=" and " property="codUnnorma">DF.COD_UNNORMA = #codUnnorma:CHAR#</isNotNull>  -->
	  	  <!-- <isNotNull prepend=" and " property="nomModulo">DF.NOM_MODULO = #nomModulo:VARCHAR#</isNotNull>  -->
	  	  <!-- <isNotNull prepend=" and " property="nomProceso">DF.NOM_PROCESO = #nomProceso:VARCHAR#</isNotNull>  -->
	  	  <!-- <isNotNull prepend=" and " property="codUsuautor">DF.COD_USUAUTOR = #codUsuautor:CHAR#</isNotNull>  -->
	  	  <!-- <isNotNull prepend=" and " property="indEstdoc">DF.IND_ESTDOC = #indEstdoc:CHAR#</isNotNull>  -->
		</dynamic>
		order by DF.NUM_SECUENCIA desc, DF.NUM_VERSION desc
	  </select>
	  
	<select id="encriptaCadena" resultClass="java.lang.String" parameterClass="java.util.HashMap">
		select SEG_CIFRADO.ENCRIPTA(#codToken:VARCHAR#, #clave:VARCHAR#)  FROM DUAL
	</select>

	<select id="desencriptaCadena"  resultClass="java.lang.String" parameterClass="java.util.HashMap">
		select SEG_CIFRADO.DESENCRIPTA(#codToken:VARCHAR#, #clave:VARCHAR#)  FROM DUAL
	</select>

</sqlMap>