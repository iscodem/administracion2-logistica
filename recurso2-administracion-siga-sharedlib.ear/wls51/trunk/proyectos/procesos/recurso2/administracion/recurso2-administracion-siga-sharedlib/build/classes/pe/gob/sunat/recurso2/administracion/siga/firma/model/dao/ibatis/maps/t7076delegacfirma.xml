<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t7076delegacfirma" >
  <resultMap id="BaseResultMap" class="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    <result column="COD_DELEGACION" property="codDelegacion" jdbcType="DECIMAL" />
    <result column="COD_USURESPO" property="codUsurespo" jdbcType="CHAR" />
    <result column="COD_USUDELEG" property="codUsudeleg" jdbcType="CHAR" />
    <result column="FEC_INIDELEG" property="fecInideleg" jdbcType="TIMESTAMP" />
    <result column="FEC_FINDELEG" property="fecFindeleg" jdbcType="TIMESTAMP" />
    <result column="COD_UUOO" property="codUuoo" jdbcType="CHAR" />
    <result column="COD_REGISDELEG" property="codRegisdeleg" jdbcType="CHAR" />
    <result column="DES_DOCREF" property="desDocref" jdbcType="VARCHAR" />
    <result column="IND_ESTDELEGA" property="indEstdelega" jdbcType="CHAR" />
    <result column="IND_SUSPENCI" property="indSuspenci" jdbcType="CHAR" />
    <result column="FEC_SUSPENCION" property="fecSuspencion" jdbcType="TIMESTAMP" />
    <result column="FEC_REGIS" property="fecRegis" jdbcType="TIMESTAMP" />
    <result column="COD_USUREGIS" property="codUsuregis" jdbcType="VARCHAR" />
    <result column="DIR_IPUSUREGIS" property="dirIpusuregis" jdbcType="VARCHAR" />
    <result column="FEC_MODIF" property="fecModif" jdbcType="TIMESTAMP" />
    <result column="COD_USUMODIF" property="codUsumodif" jdbcType="VARCHAR" />
    <result column="DIR_IPUSUMODIF" property="dirIpusumodif" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    select 'false' as QUERYID, COD_DELEGACION, COD_USURESPO, COD_USUDELEG, FEC_INIDELEG,
      FEC_FINDELEG, COD_UUOO, COD_REGISDELEG, DES_DOCREF, IND_ESTDELEGA, IND_SUSPENCI,
      FEC_SUSPENCION, FEC_REGIS, COD_USUREGIS, DIR_IPUSUREGIS, FEC_MODIF, COD_USUMODIF,
      DIR_IPUSUMODIF
    from T7076DELEGACFIRMA
    where COD_DELEGACION = #codDelegacion:DECIMAL#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    delete from T7076DELEGACFIRMA
    where COD_DELEGACION = #codDelegacion:DECIMAL#
  </delete>
  <insert id="insert" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    insert into T7076DELEGACFIRMA (COD_DELEGACION, COD_USURESPO, COD_USUDELEG, FEC_INIDELEG,
      FEC_FINDELEG, COD_UUOO, COD_REGISDELEG, DES_DOCREF, IND_ESTDELEGA, IND_SUSPENCI,
      FEC_SUSPENCION, FEC_REGIS, COD_USUREGIS, DIR_IPUSUREGIS, FEC_MODIF, COD_USUMODIF,
      DIR_IPUSUMODIF)
    values (#codDelegacion:DECIMAL#, #codUsurespo:CHAR#, #codUsudeleg:CHAR#,
      #fecInideleg:TIMESTAMP#, #fecFindeleg:TIMESTAMP#, #codUuoo:CHAR#, #codRegisdeleg:CHAR#,
      #desDocref:VARCHAR#, #indEstdelega:CHAR#, #indSuspenci:CHAR#, #fecSuspencion:TIMESTAMP#,
      #fecRegis:TIMESTAMP#, #codUsuregis:VARCHAR#, #dirIpusuregis:VARCHAR#, #fecModif:TIMESTAMP#,
      #codUsumodif:VARCHAR#, #dirIpusumodif:VARCHAR#)
  </insert>
  <insert id="insertSelective" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    insert into T7076DELEGACFIRMA
    <dynamic prepend="(" >
      <isNotNull prepend="," property="codDelegacion" >
        COD_DELEGACION
      </isNotNull>
      <isNotNull prepend="," property="codUsurespo" >
        COD_USURESPO
      </isNotNull>
      <isNotNull prepend="," property="codUsudeleg" >
        COD_USUDELEG
      </isNotNull>
      <isNotNull prepend="," property="fecInideleg" >
        FEC_INIDELEG
      </isNotNull>
      <isNotNull prepend="," property="fecFindeleg" >
        FEC_FINDELEG
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        COD_UUOO
      </isNotNull>
      <isNotNull prepend="," property="codRegisdeleg" >
        COD_REGISDELEG
      </isNotNull>
      <isNotNull prepend="," property="desDocref" >
        DES_DOCREF
      </isNotNull>
      <isNotNull prepend="," property="indEstdelega" >
        IND_ESTDELEGA
      </isNotNull>
      <isNotNull prepend="," property="indSuspenci" >
        IND_SUSPENCI
      </isNotNull>
      <isNotNull prepend="," property="fecSuspencion" >
        FEC_SUSPENCION
      </isNotNull>
      <isNotNull prepend="," property="fecRegis" >
        FEC_REGIS
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        COD_USUREGIS
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        DIR_IPUSUREGIS
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        FEC_MODIF
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        COD_USUMODIF
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        DIR_IPUSUMODIF
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="codDelegacion" >
        #codDelegacion:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codUsurespo" >
        #codUsurespo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codUsudeleg" >
        #codUsudeleg:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecInideleg" >
        #fecInideleg:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fecFindeleg" >
        #fecFindeleg:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        #codUuoo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codRegisdeleg" >
        #codRegisdeleg:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="desDocref" >
        #desDocref:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="indEstdelega" >
        #indEstdelega:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="indSuspenci" >
        #indSuspenci:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecSuspencion" >
        #fecSuspencion:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fecRegis" >
        #fecRegis:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        #codUsuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        #dirIpusuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        #fecModif:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        #codUsumodif:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        #dirIpusumodif:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    update T7076DELEGACFIRMA
    <dynamic prepend="set" >
      <isNotNull prepend="," property="codUsurespo" >
        COD_USURESPO = #codUsurespo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codUsudeleg" >
        COD_USUDELEG = #codUsudeleg:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecInideleg" >
        FEC_INIDELEG = #fecInideleg:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fecFindeleg" >
        FEC_FINDELEG = #fecFindeleg:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUuoo" >
        COD_UUOO = #codUuoo:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="codRegisdeleg" >
        COD_REGISDELEG = #codRegisdeleg:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="desDocref" >
        DES_DOCREF = #desDocref:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="indEstdelega" >
        IND_ESTDELEGA = #indEstdelega:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="indSuspenci" >
        IND_SUSPENCI = #indSuspenci:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecSuspencion" >
        FEC_SUSPENCION = #fecSuspencion:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fecRegis" >
        FEC_REGIS = #fecRegis:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsuregis" >
        COD_USUREGIS = #codUsuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusuregis" >
        DIR_IPUSUREGIS = #dirIpusuregis:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fecModif" >
        FEC_MODIF = #fecModif:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="codUsumodif" >
        COD_USUMODIF = #codUsumodif:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dirIpusumodif" >
        DIR_IPUSUMODIF = #dirIpusumodif:VARCHAR#
      </isNotNull>
    </dynamic>
    where COD_DELEGACION = #codDelegacion:DECIMAL#
  </update>
  <update id="updateByPrimaryKey" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Mar 30 14:05:42 COT 2016.
    -->
    update T7076DELEGACFIRMA
    set COD_USURESPO = #codUsurespo:CHAR#,
      COD_USUDELEG = #codUsudeleg:CHAR#,
      FEC_INIDELEG = #fecInideleg:TIMESTAMP#,
      FEC_FINDELEG = #fecFindeleg:TIMESTAMP#,
      COD_UUOO = #codUuoo:CHAR#,
      COD_REGISDELEG = #codRegisdeleg:CHAR#,
      DES_DOCREF = #desDocref:VARCHAR#,
      IND_ESTDELEGA = #indEstdelega:CHAR#,
      IND_SUSPENCI = #indSuspenci:CHAR#,
      FEC_SUSPENCION = #fecSuspencion:TIMESTAMP#,
      FEC_REGIS = #fecRegis:TIMESTAMP#,
      COD_USUREGIS = #codUsuregis:VARCHAR#,
      DIR_IPUSUREGIS = #dirIpusuregis:VARCHAR#,
      FEC_MODIF = #fecModif:TIMESTAMP#,
      COD_USUMODIF = #codUsumodif:VARCHAR#,
      DIR_IPUSUMODIF = #dirIpusumodif:VARCHAR#
    where COD_DELEGACION = #codDelegacion:DECIMAL#
  </update>

  <select id="listByParameter" resultMap="BaseResultMap" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    select COD_DELEGACION, COD_USURESPO, COD_USUDELEG, FEC_INIDELEG,
      FEC_FINDELEG, COD_UUOO, COD_REGISDELEG, DES_DOCREF, IND_ESTDELEGA, IND_SUSPENCI,
      FEC_SUSPENCION, FEC_REGIS, COD_USUREGIS, DIR_IPUSUREGIS, FEC_MODIF, COD_USUMODIF,
      DIR_IPUSUMODIF
    from T7076DELEGACFIRMA
    <dynamic prepend="where">
	  <isNotNull prepend=" and " property="codDelegacion">COD_DELEGACION = #codDelegacion:DECIMAL#</isNotNull> 
	  <isNotNull prepend=" and " property="codUsurespo">COD_USURESPO = #codUsurespo:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUsudeleg">COD_USUDELEG = #codUsudeleg:CHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="codUuoo">COD_UUOO = #codUuoo:VARCHAR#</isNotNull> 
	  <isNotNull prepend=" and " property="indEstdelega">IND_ESTDELEGA = #indEstdelega:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="indSuspenci">IND_SUSPENCI = #indSuspenci:VARCHAR#</isNotNull> 
  	  <isNotNull prepend=" and " property="fecInideleg">FEC_INIDELEG &lt;= #fecInideleg:TIMESTAMP#</isNotNull> 
  	  <isNotNull prepend=" and " property="fecFindeleg">FEC_FINDELEG &gt;= #fecFindeleg:TIMESTAMP#</isNotNull> 
	</dynamic>
  </select>
  
  
  
<!--   <select id="selectSecuencia" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" resultClass="java.lang.String" >
 	select TO_CHAR(TO_NUMBER( TRIM (NVL(MAX(DELEG.COD_DELEGACION),0)))+1) from SIGA01.T7076DELEGACFIRMA DELEG
	</select> -->
	
	<parameterMap id="obtenerSecuencialParam" class="java.util.HashMap">
		<parameter property="nomtabla" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="IN" />
		<parameter property="nomcampo" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="IN" />
		<parameter property="vSecuencia" javaType="java.lang.String"
			jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>
	
	<procedure id="obtenerSecuencial" parameterMap="obtenerSecuencialParam">
		{ CALL SIGA01.PAFIRMAELECTRONICA.SPSECUENCIASIGA (?,?,? ) }
	</procedure>
  
  <select id="fn_verificaencargo" parameterClass="map" resultClass="java.lang.String">
		SELECT SIGA01.PAFIRMAELECTRONICA.FNVERIENCARGOFIRMA(#codDependencia#,#codEmpleado#,#fechaInicio#,#fechaFin#) FROM DUAL
  </select>
  
  
  <insert id="insertarDelegacion" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma">
insert into SIGA01.T7076DELEGACFIRMA (
		COD_DELEGACION, 
		COD_USURESPO, 
		COD_USUDELEG, 
		FEC_INIDELEG,
      FEC_FINDELEG, 
      COD_UUOO, 
      COD_REGISDELEG, 
      DES_DOCREF, 
      IND_ESTDELEGA, 
      IND_SUSPENCI,
      FEC_SUSPENCION, 
      FEC_REGIS, 
      COD_USUREGIS, 
      DIR_IPUSUREGIS, 
      FEC_MODIF, 
      COD_USUMODIF,
      DIR_IPUSUMODIF
    )values (
    #codDelegacion#, 
    #codUsurespo#, 
    #codUsudeleg#,
      #fecInideleg#, 
      #fecFindeleg#, 
      #codUuoo#, 
      #codRegisdeleg#,
      #desDocref#, 
      #indEstdelega#, 
      #indSuspenci#, 
      #fecSuspencion#,
      #fecRegis#, 
      #codUsuregis#, 
      #dirIpusuregis#, 
      #fecModif#,
      #codUsumodif#, 
      #dirIpusumodif#)
	</insert>
  
  
  <update id="deshabilitarDelegacion" parameterClass="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma" >
    update SIGA01.T7076DELEGACFIRMA
    set 
      IND_ESTDELEGA = #indEstdelega#,
      IND_SUSPENCI = #indSuspenci#,
      FEC_SUSPENCION = #fecSuspencion#,
      FEC_MODIF = #fecModif#,
      COD_USUMODIF = #codUsumodif#,
      DIR_IPUSUMODIF = #dirIpusumodif#
    where COD_DELEGACION = #codDelegacion#
  </update>
  
  
  
  <resultMap id="lstEncargos" class="pe.gob.sunat.recurso2.administracion.siga.firma.model.bean.T7076DelegacFirma">
	    <result column="COD_DELEGACION" 	property="codDelegacion" />
	    <result column="COD_USURESPO" 		property="codUsurespo" 	/>
	    <result column="COD_USUDELEG" 		property="codUsudeleg" 	/>
	    <result column="FEC_INIDELEG" 		property="fecInideleg" 	/>
	    <result column="FEC_FINDELEG" 		property="fecFindeleg" 	/>
	    <result column="COD_UUOO" 			property="codUuoo" 		/>
	    <result column="COD_REGISDELEG" 	property="codRegisdeleg" />
	    <result column="DES_DOCREF" 		property="desDocref" 	 />
	    <result column="IND_ESTDELEGA" 		property="indEstdelega" />
	    <result column="IND_SUSPENCI" 		property="indSuspenci" 	/>
	    <result column="FEC_SUSPENCION" 	property="fecSuspencion"  />
	    <result column="FEC_REGIS" 			property="fecRegis" 	/>
	    <result column="COD_USUREGIS" 		property="codUsuregis" 	 />
	    <result column="DIR_IPUSUREGIS" 	property="dirIpusuregis" />
	    <result column="FEC_MODIF" 			property="fecModif" 	 />
	    <result column="COD_USUMODIF" 		property="codUsumodif" 	 />
	    <result column="DIR_IPUSUMODIF" 	property="dirIpusumodif" />
	    
	    <result column="NUMERO_REGISTRO_ALTERNO" 	property="numRegDeleg" />
	    <result column="NOMB_CORT_PER" 				property="nomUsudeleg" />  
	    <result column="DESC_DEPE" 					property="desUuoo" />
	    <result column="UNIDAD_ORGANIZACIONAL" 		property="uuoo" />
    
	</resultMap>
  
  <select id="selectEncargosFirma"  parameterClass="map"  resultMap="lstEncargos">	
		SELECT DELEG.COD_DELEGACION, 
          DELEG.COD_USURESPO, 
          DELEG.COD_REGISDELEG,
          DELEG.COD_USUDELEG,
          MP2.NUMERO_REGISTRO_ALTERNO,
          MP2.NOMB_CORT_PER, 
          DELEG.FEC_INIDELEG,
          DELEG.FEC_FINDELEG, 
          DELEG.COD_UUOO,
          TD.UNIDAD_ORGANIZACIONAL, 
          TD.UNIDAD_ORGANIZACIONAL ||' - ' || TD.DESC_DEPE_TDE AS DESC_DEPE,
          TD.DESC_DEPE_TDE ,
          DELEG.DES_DOCREF, 
          DECODE(DELEG.IND_ESTDELEGA,'1','Activo','0','Inactivo','3','Suspendido') IND_ESTDELEGA, 
          DELEG.IND_SUSPENCI,
          DELEG.FEC_SUSPENCION, 
          DELEG.FEC_REGIS, 
          DELEG.COD_USUREGIS, 
          DELEG.DIR_IPUSUREGIS, 
          DELEG.FEC_MODIF, 
          DELEG.COD_USUMODIF,
          DELEG.DIR_IPUSUMODIF
        FROM SIGA01.T7076DELEGACFIRMA DELEG, MAESTRO_PERSONAL MP2, TDEPENDENCIAS TD
        WHERE DELEG.COD_USUDELEG=MP2.CODI_EMPL_PER
        AND DELEG.COD_UUOO=TD.CODI_DEPE_TDE
        <!-- AND MP2.CODI_DEPE_TDE=TD.CODI_DEPE_TDE -->
        AND DELEG.IND_ESTDELEGA ='1'
        AND TO_CHAR(SYSDATE, 'YYYYMMDD')&lt;=TO_CHAR(DELEG.FEC_FINDELEG,'YYYYMMDD')
			<isNotNull prepend="AND" property="codUsurespo"> DELEG.COD_USURESPO = #codUsurespo# </isNotNull>
		<!-- 
		<isNotNull prepend="AND" property="fecDesde"> TO_CHAR(AP.FECHA_PEDIDO, 'YYYYMMDD') &gt;= TO_CHAR(#fecDesde#, 'YYYYMMDD') </isNotNull>
		<isNotNull prepend="AND" property="fecHasta"> TO_CHAR(AP.FECHA_PEDIDO, 'YYYYMMDD') &lt;= TO_CHAR(#fecHasta#, 'YYYYMMDD') </isNotNull> 
		-->
		ORDER BY DELEG.FEC_REGIS DESC
	</select>
  
</sqlMap>